# üéâ –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è v1.1.0 –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. Git —Ç–µ–≥ —Å–æ–∑–¥–∞–Ω
- **–í–µ—Ä—Å–∏—è**: v1.1.0
- **–ö–æ–º–º–∏—Ç**: 697f960
- **–¢–µ–≥ –∑–∞–ø—É—à–µ–Ω**: https://github.com/vipfat/Tabak_Multiuser/releases/tag/v1.1.0

### 2. –ë—ç–∫–∞–ø—ã —Å–æ–∑–¥–∞–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:**
```
/home/tabakapp/apps/tabak_multiuser_backup_v1.1.0_20251221_164003.tar.gz (30MB)
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
```
/home/tabakapp/appdb_backup_v1.1.0_20251221_164048.sql (28KB)
```

## üîÑ –ö–∞–∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç—É –≤–µ—Ä—Å–∏—é

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /workspaces/Tabak_Multiuser
git checkout v1.1.0
npm run build
scp -r dist/* root@103.88.241.78:/home/tabakapp/apps/tabak_multiuser/dist/
scp -r server/* root@103.88.241.78:/home/tabakapp/apps/tabak_multiuser/server/
ssh root@103.88.241.78 "pm2 restart tabak-api"
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑ –±—ç–∫–∞–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh root@103.88.241.78
cd /home/tabakapp/apps
rm -rf tabak_multiuser_old
mv tabak_multiuser tabak_multiuser_old
tar -xzf tabak_multiuser_backup_v1.1.0_20251221_164003.tar.gz
pm2 restart tabak-api
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
ssh root@103.88.241.78
sudo -u postgres psql -d appdb -c "DROP SCHEMA public CASCADE; CREATE SCHEMA public;"
sudo -u postgres psql -d appdb < /home/tabakapp/appdb_backup_v1.1.0_20251221_164048.sql
```

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤–µ—Ä—Å–∏–∏ v1.1.0

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
‚úÖ –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Å —Ç—Ä–µ–º—è –≤–∫–ª–∞–¥–∫–∞–º–∏ (Pending, All, Venues)  
‚úÖ Role-based access control (super_admin/owner)  
‚úÖ Approve/Reject –∑–∞—è–≤–æ–∫ –Ω–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è  
‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≤–µ–¥–µ–Ω–∏–π  
‚úÖ –ö–Ω–æ–ø–∫–∞ "–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω" –≤ —à–∞–ø–∫–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è super_admin)  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ  

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
‚úÖ –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (string ‚Üí number –¥–ª—è ID)  
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ venues —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç  
‚úÖ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è /owner  
‚úÖ ES6 –º–æ–¥—É–ª–∏ –≤ middleware  

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–í—Ö–æ–¥ –∫–∞–∫ super admin:**
   - URL: https://hookahmix.ru/owner
   - Email: pl79vi86@gmail.com
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

2. **–§—É–Ω–∫—Ü–∏–∏ –ø–∞–Ω–µ–ª–∏:**
   - ‚úì –í–∫–ª–∞–¥–∫–∞ "Pending" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º pending
   - ‚úì –ö–Ω–æ–ø–∫–∞ "Approve" —Å–æ–∑–¥–∞–µ—Ç venue –∏ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å
   - ‚úì –ö–Ω–æ–ø–∫–∞ "Reject" –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞—è–≤–∫—É —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º
   - ‚úì –í–∫–ª–∞–¥–∫–∞ "Venues" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
   - ‚úì Toggle –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **API endpoints:**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
   curl https://hookahmix.ru/api/health
   
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
   curl https://hookahmix.ru/api/auth/me \
     -H "Authorization: Bearer YOUR_TOKEN"
   ```

## üìù –õ–æ–≥–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

```bash
# PM2 —Å—Ç–∞—Ç—É—Å
ssh root@103.88.241.78 "pm2 list"

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ API
ssh root@103.88.241.78 "cat /root/.pm2/logs/tabak-api-error.log | tail -50"

# Nginx —Å—Ç–∞—Ç—É—Å
ssh root@103.88.241.78 "systemctl status nginx"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
ssh root@103.88.241.78 "sudo -u postgres psql -d appdb -c 'SELECT COUNT(*) FROM venue_owners;'"
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [RESTORE_v1.1.0.md](RESTORE_v1.1.0.md)
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
3. –í—Å—ë –≤–µ—Ä–Ω–µ—Ç—Å—è –∫ —Ä–∞–±–æ—á–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞:** 21 –¥–µ–∫–∞–±—Ä—è 2025, 16:40 UTC  
**Super admin:** pl79vi86@gmail.com (ID: 5)  
**–°–µ—Ä–≤–µ—Ä:** 103.88.241.78 (hookahmix.ru)
