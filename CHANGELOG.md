# Changelog - –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã

## 2025-12-16: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π

### üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –∑–∞–º–µ–Ω–∏–≤ Google Forms.

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### Backend
1. **–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏** (–≤ `/server/`):
   - `authService.js` - –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (bcrypt, JWT)
   - `authMiddleware.js` - Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤
   - `authRoutes.js` - –†–æ—É—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (/api/auth/*)
   - `ownerRoutes.js` - –†–æ—É—Ç—ã –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (/api/owner/*)

2. **API Endpoints**:
   - `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
   - `POST /api/auth/login` - –í—Ö–æ–¥
   - `POST /api/auth/refresh` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
   - `POST /api/auth/logout` - –í—ã—Ö–æ–¥
   - `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - `POST /api/auth/forgot-password` - –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
   - `POST /api/auth/reset-password` - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è
   - `GET /api/owner/profile` - –ü—Ä–æ—Ñ–∏–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞
   - `PATCH /api/owner/profile` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
   - `GET /api/owner/venues` - –°–ø–∏—Å–æ–∫ –∑–∞–≤–µ–¥–µ–Ω–∏–π
   - `POST /api/owner/applications` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
   - `GET /api/owner/applications` - –°–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
   - `GET /api/owner/venues/:id` - –î–µ—Ç–∞–ª–∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è
   - `PATCH /api/owner/venues/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
   - `DELETE /api/owner/venues/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
   - `GET /api/owner/venues/:id/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≤–µ–¥–µ–Ω–∏—è

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
   - –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `venue_owners` - –í–ª–∞–¥–µ–ª—å—Ü—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π
   - –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `venue_applications` - –ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   - –ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `owner_sessions` - JWT refresh —Ç–æ–∫–µ–Ω—ã
   - –û–±–Ω–æ–≤–ª–µ–Ω–∞ `venues` - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: owner_id, slug, address, bowl_capacity, allow_brand_mixing, updated_at

#### Frontend
1. **–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
   - `OwnerAuth.tsx` - –§–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏–Ω–∞
   - `OwnerDashboard.tsx` - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞
   - `OwnerApp.tsx` - –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

2. **–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã**:
   - `owner.html` - HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è –õ–ö
   - `owner-entry.tsx` - Entry point –¥–ª—è –õ–ö

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª UI**:
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞
   - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   - Dashboard —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
   - –§–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∑–∞–≤–µ–¥–µ–Ω–∏–π
   - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–æ–∫

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt, 10 salt rounds)
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã (access: 15 –º–∏–Ω, refresh: 7 –¥–Ω–µ–π)
- ‚úÖ Refresh token rotation
- ‚úÖ –ó–∞—â–∏—Ç–∞ –≤—Å–µ—Ö owner endpoints
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ SQL injection protection

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω `vite.config.ts` –¥–ª—è multi-page app
- –î–æ–±–∞–≤–ª–µ–Ω proxy –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω `package.json` (–¥–æ–±–∞–≤–ª–µ–Ω—ã bcryptjs, jsonwebtoken)
- –°–æ–∑–¥–∞–Ω `setup-db.js` —Å –Ω–æ–≤—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `ARCHITECTURE.md` - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- `DEPLOYMENT.md` - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `CHANGELOG.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### üîÑ –ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- ‚úÖ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã
- ‚úÖ API –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (/api/venues, /api/mixes, –∏ —Ç.–¥.) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –î–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∑–∞–≤–µ–¥–µ–Ω–∏–π:
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/owner.html
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è (email + –ø–∞—Ä–æ–ª—å)
3. –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
4. –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è - —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ dashboard

#### –î–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π):
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/
2. –í—ã–±—Ä–∞—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∏–µ
3. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram
4. –°–æ–∑–¥–∞–≤–∞—Ç—å –º–∏–∫—Å—ã —Ç–∞–±–∞–∫–∞

### üé® UX Flow

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–∞:
```
1. –û—Ç–∫—Ä—ã—Ç—å /owner.html
2. –ù–∞–∂–∞—Ç—å "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É (email, –ø–∞—Ä–æ–ª—å, –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω)
4. ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
5. ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ Dashboard
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è:
```
1. –í Dashboard –Ω–∞–∂–∞—Ç—å "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∑–∞–≤–µ–¥–µ–Ω–∏–µ"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∑–∞—è–≤–∫—É (–Ω–∞–∑–≤–∞–Ω–∏–µ, –≥–æ—Ä–æ–¥, –∞–¥—Ä–µ—Å, –æ–ø–∏—Å–∞–Ω–∏–µ)
3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
4. –°—Ç–∞—Ç—É—Å: "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏" üü°
5. –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∞–¥–º–∏–Ω–æ–º:
   - –°—Ç–∞—Ç—É—Å: "–û–¥–æ–±—Ä–µ–Ω–æ" üü¢
   - –ó–∞–≤–µ–¥–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
   - –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤–∫—É—Å—ã, –±—Ä—ç–Ω–¥—ã
```

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- Bcrypt (10 rounds) –¥–ª—è –ø–∞—Ä–æ–ª–µ–π
- JWT access token (15 –º–∏–Ω—É—Ç –∂–∏–∑–Ω–∏)
- JWT refresh token (7 –¥–Ω–µ–π –∂–∏–∑–Ω–∏)
- –•—Ä–∞–Ω–µ–Ω–∏–µ refresh —Ç–æ–∫–µ–Ω–æ–≤ –≤ –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –ª–æ–≥–∞—É—Ç–µ
- –ó–∞—â–∏—Ç–∞ –≤—Å–µ—Ö endpoints middleware

#### TODO –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
- [ ] HTTPS (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)
- [ ] Rate limiting
- [ ] Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] CORS whitelist
- [ ] Helmet.js
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏—Ç–∞

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)

–í–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å:
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–∫—Å–æ–≤ —Å –µ–≥–æ –≤–∫—É—Å–∞–º–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢–æ–ø-10 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–∫—É—Å–æ–≤
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π

### üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ (TODO)
2. **–ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ** - –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ URL (TODO: upload)
3. **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫ –Ω—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (TODO)
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** - –Ω–µ—Ç —Ä–æ–ª–µ–π (admin, owner, user) - –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ owner (TODO)

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã:
- `bcryptjs` ^2.4.3 - –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `jsonwebtoken` ^9.0.2 - JWT —Ç–æ–∫–µ–Ω—ã

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–¢—Ä–µ–±—É–µ—Ç—Å—è –≤ `.env.local`:
```env
DATABASE_URL=postgresql://tabakapp:tabakpass123@localhost:5432/appdb
JWT_SECRET=your-secret-key-change-in-production
```

### üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ owner_id = NULL
- –ú–æ–∂–Ω–æ –ø–æ–∑–∂–µ —Å–≤—è–∑–∞—Ç—å —Å –≤–ª–∞–¥–µ–ª—å—Ü–∞–º–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å `node setup-db.js`
3. –°–æ–∑–¥–∞—Ç—å `.env.local`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run api` (—Ç–µ—Ä–º–∏–Ω–∞–ª 1)
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run dev` (—Ç–µ—Ä–º–∏–Ω–∞–ª 2)
6. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/owner.html
7. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### ‚è≠Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

#### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
2. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
3. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ª–æ–≥–æ, —Ñ–æ—Ç–æ)
4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫—É—Å–∞–º–∏ —á–µ—Ä–µ–∑ –õ–ö

#### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
6. –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
7. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫

#### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
8. 2FA –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
9. OAuth (Google, Facebook)
10. Mobile app

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### JWT Structure
```json
{
  "ownerId": "uuid",
  "email": "owner@example.com",
  "type": "access",
  "iat": 1234567890,
  "exp": 1234568790
}
```

### Refresh Token Flow
```
1. Client ‚Üí POST /api/auth/login
2. Server ‚Üí { accessToken, refreshToken }
3. Client ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ localStorage
4. Client ‚Üí –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å Authorization: Bearer <accessToken>
5. –ï—Å–ª–∏ 401 ‚Üí POST /api/auth/refresh { refreshToken }
6. Server ‚Üí { accessToken } (–Ω–æ–≤—ã–π)
7. Client ‚Üí –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```

### Database Schema Changes
```sql
-- –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
CREATE TABLE venue_owners (
  id UUID PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  full_name VARCHAR(255),
  phone VARCHAR(50),
  email_verified BOOLEAN DEFAULT false,
  ...
);

CREATE TABLE venue_applications (
  id UUID PRIMARY KEY,
  owner_id UUID REFERENCES venue_owners(id),
  venue_name VARCHAR(255),
  city VARCHAR(255),
  status VARCHAR(50) DEFAULT 'pending',
  ...
);

CREATE TABLE owner_sessions (
  id UUID PRIMARY KEY,
  owner_id UUID REFERENCES venue_owners(id),
  refresh_token TEXT UNIQUE,
  expires_at TIMESTAMP,
  ...
);

-- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü—ã
ALTER TABLE venues 
  ADD COLUMN owner_id UUID REFERENCES venue_owners(id),
  ADD COLUMN slug VARCHAR(255) UNIQUE,
  ADD COLUMN address TEXT,
  ADD COLUMN bowl_capacity INTEGER DEFAULT 18,
  ADD COLUMN allow_brand_mixing BOOLEAN DEFAULT true,
  ADD COLUMN updated_at TIMESTAMP DEFAULT NOW();
```

---

**–ê–≤—Ç–æ—Ä**: GitHub Copilot  
**–î–∞—Ç–∞**: 16 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è**: 1.0.0
